pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
--wsdf loader

delimeters={"#","%",">","<","=",";","*"}

function has_delimeter(string)
	for c in all(split(string,"")) do
		for d in all(delimeters) do
			if d == c then
				return true
			end
		end
	end
	return false
end

function decode_wsdf(data,del_id)
	del_id = del_id or 1
	local decoded = split(data,delimeters[del_id],true)
	for k,c in ipairs(decoded) do
		if has_delimeter(c) then
			decoded[k] = decode_wsdf(c,del_id+1)
		end
	end
	return decoded
end


-->8
--wsdf data

dialogue = decode_wsdf("hello there!%hi how are you?<2>hi tell me, what do you think about the king<3>here, have some gold<give gold 5 4#im good thanks, bye!%bye<-1#i think hes evil%bye<-1#thanks mate%bye<-1")
eatable_things = decode_wsdf("apples%pears%oranges%bananas%pineapples%kiwis#tomatoes%cucumbers%carrots#bread%rice%pasta")

print(eatable_things[3][3])
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
